# 평가 프롬프트 설계하기

## 일반적인 프롬프트 설계 팁
프롬프트 자체를 설계할 때 온라인에서 접한 몇 가지 일반적인 가이드라인은 다음과 같습니다:
- 수행할 작업에 대한 명확한 설명을 제공하세요:
	- `당신의 작업은 X를 수행하는 것입니다`. 
	- `당신에게 Y가 제공될 것입니다`.
- 필요한 경우 세부적인 채점 시스템을 포함하여 평가 기준에 대한 명확한 지침을 제공하세요:
	- `1이 ...를 의미하는 1-5 척도로 속성 Z를 평가해야 합니다`
	- `샘플 Y에 속성 Z가 존재하는지 평가해야 합니다. 속성 Z는 다음과 같은 경우에 존재합니다...`
- 추가적인 "추론" 평가 단계를 제공하세요:
	- `이 작업을 판단하기 위해, 먼저 샘플 Y를 주의 깊게 읽고 ...를 식별한 다음, ...을 해야 합니다`
- 원하는 출력 형식을 지정하세요(필드를 추가하면 일관성에 도움이 됩니다)
	- `귀하의 답변은 다음 형식의 JSON으로 제공되어야 합니다 {"점수": 당신의 점수, "추론": 이 점수에 이르게 된 추론 과정}`

[MixEval](https://github.com/huggingface/lighteval/blob/main/src/lighteval/tasks/extended/mix_eval/judge_prompts.pyy)이나 [MTBench](https://github.com/huggingface/lighteval/blob/main/src/lighteval/tasks/extended/mt_bench/judge_prompt_templates.py) 프롬프트 템플릿에서 영감을 얻는 것이 좋습니다.

기타 팁:
- 쌍별 비교는 점수 매기기보다 [인간 선호도와 더 잘 상관관계](https://arxiv.org/abs/2403.16950)가 있으며, 일반적으로 더 견고합니다.
- 정말 점수를 원한다면, 정수 척도를 사용하고 [각 점수가 나타내는 것](https://x.com/seungonekim/status/1749289437165769177)에 대한 자세한 설명을 제공하거나, 가산적 프롬프트(예: `답변의 이 특성에 대해 1점을 부여하고, ...의 경우 추가 1점을 부여합니다` 등)를 사용하세요.
- 평가할 능력마다 하나의 프롬프트를 사용하면 더 나은 결과와 더 견고한 결과를 얻는 경향이 있습니다.

## 판단 정확도 향상하기
다음과 같은 방법을 사용하여 정확도를 향상시킬 수 있습니다(단, 비용이 더 들 수 있음):
- **소수의 예시(Few shot examples)**: 다른 많은 작업과 마찬가지로, 예시를 제공하면 추론에 도움이 될 수 있습니다. 그러나 이는 컨텍스트 길이를 증가시킵니다.
- **참조**: 참조가 있는 경우 프롬프트에 추가하여 정확도를 높일 수 있습니다.
- **사고 과정(CoT)**: 모델이 점수를 매기기 **전에** 사고 과정을 출력하도록 요청하면 [정확도가 향상됩니다](https://arxiv.org/abs/2212.08073)([여기](https://x.com/seungonekim/status/1749289437165769177)에서도 관찰됨).
- **다중 턴 분석**: [사실 오류 탐지](https://arxiv.org/abs/2305.13281)를 개선할 수 있습니다.
- **배심원단** 사용(답변의 집계를 선택하는 여러 평가자): 단일 모델을 사용하는 것보다 [더 나은 결과](https://arxiv.org/abs/2404.18796)를 제공합니다.
	- 하나의 크고 비싼 모델 대신 여러 개의 작은 모델을 활용하면 비용을 상당히 줄일 수 있습니다.
	- 또한 온도(temperature) 변화를 주어 하나의 모델을 여러 번 실행하는 방법도 시도해 볼 수 있습니다.
- 놀랍게도, 커뮤니티는 프롬프트에 이해관계를 추가하는 것(`정확하게 답변하면 고양이를 얻게 됩니다`)이 정확성을 높일 수 있다는 것을 발견했습니다. 이 방법의 효과는 상황에 따라 다를 수 있으니, 필요에 맞게 조정하세요.

프롬프팅에 관한 참고 사항: 사용 사례의 중요도에 따라, 가능한 한 많은 편향을 제거하기 위해 좋은 설문지를 설계하는 방법에 대한 사회학 연구를 살펴보는 것이 좋습니다. 평가자를 인간 평가자의 대체물로 간주한다면, 유사한 지표를 살펴볼 필요가 있습니다: 평가자 간 일치도 계산, 편향을 완화하기 위한 올바른 설문 설계 방법론 사용 등.

그러나 대부분의 사람들은 실제로 재현 가능하고 고품질의 편향 없는 평가를 원하지 않으며, 적당한 프롬프트를 통한 빠르고 간단한 평가로도 만족합니다. (이것도 괜찮은 상황입니다! 단지 결과에 따른 결과에 달려 있습니다).